---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

const featuredImages = await getCollection('images', ({ data }) => data.featured);
const [firstImage, ...restImages] = featuredImages;
---

<Layout title="Photo Portfolio">
	<h1>PhotoFer</h1>
	
	<section class="featured">
		{firstImage && (
			<div class="featured-main">
				<a href={`/images/${firstImage.slug}`}>
					<Image 
						src={firstImage.data.image} 
						alt={firstImage.data.title} 
						width={1200} 
						height={800} 
						loading="eager" 
					/>
					<h2>{firstImage.data.title}</h2>
				</a>
			</div>
		)}

		<div class="gallery">
			{restImages.map((image) => (
				<a href={`/images/${image.slug}`}>
					<Image 
						src={image.data.image} 
						alt={image.data.title} 
						width={300} 
						height={300} 
						loading="eager" 
					/>
					<h2>{image.data.title}</h2>
				</a>
			))}
		</div>
	</section>
</Layout>

<style>
	h1 {
		margin-bottom: 2rem;
		font-size: 2.5rem;
	}

	.featured {
		margin-top: 3rem;
	}

	h2 {
		margin-bottom: 1.5rem;
		font-size: 2rem;
	}

	.featured-main {
		margin-bottom: 2rem;
	}

	.featured-main img {
		width: 100%;
		height: auto;
	}

	.gallery {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
		gap: 2rem;
	}

	.gallery img {
		width: 100%;
		height: auto;
	}

	a {
		text-decoration: none;
		color: inherit;
	}

	h2 {
		margin-top: 0.5rem;
		font-size: 1.5rem;
	}
</style>
