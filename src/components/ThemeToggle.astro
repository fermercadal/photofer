---
const script = `
(function() {
  function setTheme(theme) {
    document.documentElement.classList.toggle('dark', theme === 'dark');
  }
  // On load: check localStorage, else use OS preference
  const saved = localStorage.getItem('theme');
  if (saved) {
    setTheme(saved);
  } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
    setTheme('dark');
  }
  // Listen for OS changes
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
    if (!localStorage.getItem('theme')) {
      setTheme(e.matches ? 'dark' : 'light');
    }
  });
  // Expose toggle for button
  window.toggleTheme = function() {
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  }
})();
`;
---
<button
  id="theme-toggle-btn"
  type="button"
  class="fixed top-4 right-4 z-50 p-2 rounded bg-gray-200 dark:bg-gray-800 text-black dark:text-white"
  aria-label="Toggle dark mode"
>
  <span class="inline dark:hidden">ğŸŒ™</span>
  <span class="hidden dark:inline">â˜€ï¸</span>
</button>
<script is:inline>{script}</script> 